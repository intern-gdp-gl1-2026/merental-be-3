openapi: 3.0.3
info:
  title: MeRental API
  description: Base API contract for MeRental backend services.
  version: 1.0.0
servers:
  - url: http://localhost:8000
    description: Local development server
paths:
  /ping:
    $ref: paths/ping.yml
  /auth/register:
    $ref: paths/auth_register.yml
  /auth/login:
    $ref: paths/auth_login.yml
  /users:
    $ref: paths/users.yml
  /users/{id}:
    $ref: paths/users_by_id.yml
  /regional:
    $ref: paths/regional.yml
  /regional/{id}:
    $ref: paths/regional_by_id.yml
  /cars:
    $ref: paths/cars_list.yml
  /cars/{id}:
    $ref: paths/cars_by_id.yml
  /reservations:
    $ref: paths/reservations_list.yml
  /reservations/{id}:
    $ref: paths/reservations_by_id.yml
components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
  schemas:
    Regional:
      type: object
      required:
        - id
        - name
      properties:
        id:
          type: integer
          example: 1
        name:
          type: string
          example: "Jakarta"
    User:
      type: object
      required:
        - id
        - username
        - created_at
      properties:
        id:
          type: integer
          example: 1
        username:
          type: string
          example: "mieintel"
        created_at:
          type: string
          format: date-time
          description: Timestamp when the user was created
          example: "2025-01-23T10:30:00Z"
    Car:
      type: object
      required:
        - id
        - name
        - brand
        - model
        - year
        - plate_number
        - color
        - price_per_day
        - regional
      properties:
        id:
          type: integer
          example: 1
        name:
          type: string
          example: "Toyota Camry 2023"
        brand:
          type: string
          example: "Toyota"
        model:
          type: string
          example: "Camry"
        year:
          type: integer
          example: 2023
        plate_number:
          type: string
          example: "B 1234 XYZ"
        color:
          type: string
          example: "White"
        price_per_day:
          type: number
          format: float
          example: 500000.00
        regional:
          $ref: "#/components/schemas/Regional"
    ErrorResponse:
      type: object
      required:
        - message
      properties:
        message:
          type: string
    BadRequestErrorResponse:
      type: object
      required:
        - message
      properties:
        message:
          type: string
          example: Validation error
    ConflictErrorResponse:
      type: object
      required:
        - message
      properties:
        message:
          type: string
          example: Resource already exists
    NotFoundErrorResponse:
      type: object
      required:
        - message
      properties:
        message:
          type: string
          example: Resource not found
    UnauthorizedErrorResponse:
      type: object
      required:
        - message
      properties:
        message:
          type: string
          example: Invalid credentials
    ForbiddenErrorResponse:
      type: object
      required:
        - message
      properties:
        message:
          type: string
          example: Access denied
    Reservation:
      type: object
      required:
        - id
        - user
        - car
        - start_date
        - end_date
        - status
        - total_price
        - created_at
      properties:
        id:
          type: integer
          example: 1
        user:
          type: object
          required:
            - id
            - username
          properties:
            id:
              type: integer
              example: 1
            username:
              type: string
              example: "john_doe"
        car:
          $ref: "#/components/schemas/Car"
        start_date:
          type: integer
          format: int64
          description: Reservation start date as Unix epoch timestamp (seconds)
          example: 1737792000
        end_date:
          type: integer
          format: int64
          description: Reservation end date as Unix epoch timestamp (seconds)
          example: 1738224000
        status:
          type: string
          enum:
            - pending
            - confirmed
            - cancelled
            - completed
          example: confirmed
        total_price:
          type: number
          format: float
          description: Total price for the reservation
          example: 1500000.00
        created_at:
          type: string
          format: date-time
          description: Timestamp when the reservation was created
          example: "2025-01-23T10:30:00Z"
